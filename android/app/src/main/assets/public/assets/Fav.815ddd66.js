import{g as I,E as w,G as N,m as $,H as E,o as c,c as l,j as b,F as j,x as D,a as _,y as p,e as L,I as S,C as r,D as i,J as V,K as R,B as f}from"./index.d6deafee.js";const T={class:"flex flex-col justify-center items-center gap-7"},U={class:"flex flex-col gap-10 justify-center"},z={key:0},H=I({__name:"Fav",setup(A){let s=1;const{favs:u,gets:d,deleteFav:h}=w(),v=S(),g=f(),C=N(),P=$(C,"deletePost");d();const x=async n=>{const{open:o,close:t}=r();o();try{h(n)}catch(a){console.log(a);const{open:e}=i();e(a)}t()},y=async n=>{const{open:o,close:t}=r();o(),g.value.isPending=!0;try{await P.value(n._id)}catch(a){console.log(a);const{open:e}=i();e(a)}g.value.isPending=!1,t()},k=n=>{const o=f();o.value.postId=n._id,v.push({name:"Comments",params:{id:n._id}})},F=async()=>{const{open:n,close:o}=r();n();try{s++,await d(s)}catch(t){s--,console.log(s);const{open:a}=i();a(t)}o()},B=async()=>{const{open:n,close:o}=r();if(n(),s<=1){console.log("The first page!");const{open:t}=i();t("\u5DF2\u7ECF\u662F\u7B2C\u4E00\u9875!");return}else s--,await d(s),console.log("CurrentPage:",s);o()};return E(()=>{console.log("favs: ",u)}),(n,o)=>{const t=V,a=R;return c(),l("div",T,[b("ul",U,[(c(!0),l(j,null,D(p(u),e=>(c(),l("li",{key:e._id},[_(t,{creatorId:e.creator,title:e.title,author:e.author,description:e.content,"btn-name":"\u5220\u9664","img-url":e.imageUrl||"https://images-na.ssl-images-amazon.com/images/I/81WcnNQ-TBL.jpg","is-fav":e.isFav,onClickBtn:m=>y(e),onClickStar:m=>x(e),onClickImage:m=>k(e),class:"post-card hover:scale-105 duration-200 drop-shadow-2xl shadow-2xl bg-blend-color-burn"},null,8,["creatorId","title","author","description","img-url","is-fav","onClickBtn","onClickStar","onClickImage"])]))),128)),p(u).length!==0?(c(),l("div",z,[_(a,{onPagePre:B,onPageNext:F})])):L("",!0)])])}}});export{H as default};
